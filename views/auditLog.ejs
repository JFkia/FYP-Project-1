<!DOCTYPE html>
<html>
<head>
  <title>System Activity Log – Audit Trail</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
  <%- include("partials/navbar") %>
  <div class="sidebar-hover-zone"></div>
  <%- include("partials/sidebar") %>
    
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>System Activity Log</h1>
    
  </div>

  <table class="table table-bordered table-striped table-sm">
    <thead>
      <tr> 
        <th>Time</th>
        <th>User</th>
        <th>Action</th>
        <th>Entity</th>
        <th>Entity ID</th>
        <th>Source</th>
        <th>Old → New</th>
        <th>Remarks</th>
      </tr>
    </thead>
    <tbody>
      <% logs.forEach(log => { %>
        <tr>
          <td><%= log.timestamp.toISOString().slice(0,19).replace('T', ' ') %></td>
          <td><%= log.username || 'System' %></td>
          <td><%= log.action_type %></td>
          <td><%= log.entity_type %></td>
          <td><%= log.entity_id %></td>
          <td><%= log.source %></td>
          <td style="max-width: 350px; font-size: 0.85rem;">
            <% if (log.old_value) { %>
              <div><strong>Old:</strong> <code><%= log.old_value %></code></div>
            <% } %>
            <% if (log.new_value) { %>
              <div><strong>New:</strong> <code><%= log.new_value %></code></div>
            <% } %>
          </td>
          <td><%= log.remarks || '' %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
  <a href="deliveries.ejs" class="btn btn-secondary">Back to Deliveries</a>
</body>
<footer class="bg-gray-800 text-white py-4">
    <div class="container mx-auto text-center">
      <p class="text-sm">&copy; Placeholder TXT</p>
        </div>
      </div>
    </div>
</footer>
</html>
