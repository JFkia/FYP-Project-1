<!DOCTYPE html>
<html>
<head>
    <title>Delivery Exceptions</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<h1>Exceptions</h1>

<div class="card">
    <h2>Delivery Exceptions</h2>
    <p>This queue shows all deliveries that have failed or are delayed.</p>

    <table class="exceptions-table">
        <thead>
            <tr>
                <th>Customer</th>
                <th>Vendor</th>
                <th>Expected Date</th>
                <th>Status</th>
                <th>Tracking #</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <% exceptions.forEach(item => { %>
            <tr>
                <td><%= item.customer %></td>
                <td><%= item.vendor %></td>
                <td><%= item.expectedDate.toISOString().slice(0,10) %></td>
                
                <td>
                    <% if(item.status === 'Failed') { %>
                        <span class="badge failed">Failed</span>
                    <% } else if (item.status === 'Delayed') { %>
                        <span class="badge delayed">Delayed</span>
                    <% } else { %>
                        <span class="badge normal"><%= item.status %></span>
                    <% } %>
                </td>

                <td><%= item.trackingNumber %></td>

                <td>
                    <a href="/exceptions/<%= item._id %>/review" class="review-link">Review</a>
                </td>
            </tr>
            <% }) %>
        </tbody>
    </table>
</div>

</body>
</html>
